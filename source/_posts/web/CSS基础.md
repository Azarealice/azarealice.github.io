---
title: CSS基础
date: 2024-01-30 16:10:02
categories: 前端
---

参考文章：https://developer.mozilla.org/zh-CN/docs/Learn/CSS

## 语法

### 基础

语法由一个 选择器（`selector`）起头。它选择了我们将要用来添加样式的 HTML 元素。在这个例子中我们为一级标题（主标题`<h1>` ）添加样式。

接着输入一对大括号 `{ }`。在大括号内部定义一个或多个形式为属性（`property`）—值（`value`）对的声明。每个声明都指定了我们所选择元素的一个属性，之后跟一个我们想赋给这个属性的值。

冒号之前是属性，冒号之后是值。不同的 CSS 属性对应不同的合法值。在这个例子中，我们指定了 `color` 属性，它可以接受许多颜色值；还有 `font-size` 属性，它可以接收许多 `size unit` 值。

```css
h1 {
  color: red;
  font-size: 5em;
  margin: 0;
  padding: 20px 0;
  text-shadow: 3px 3px 1px black;
}
```

### 选择器

| 选择器                             | 效果                                                         |
| :--------------------------------- | ------------------------------------------------------------ |
| **类型、类和 ID 选择器**           |                                                              |
| `*`                                | 所有元素                                                     |
| `h1, h2`                           | 所有`h1`和`h2`元素                                           |
| `.special`                         | 所有`special`类元素                                          |
| `p.special.special2`               | 所有同时是`special`类和`special2`类的p元素                   |
| `#unique`                          | 单个id为`unique`的元素（多个元素不应使用相同id）             |
| **存否和值选择器**                 |                                                              |
| `a[title]`                         | 匹配带有一个名为`attr`的属性的元素——方括号里的值。           |
| `a[href="https://example.com"]`    | 匹配带有一个名为`attr`的属性的元素，其值正为`value`——引号中的字符串。 |
| ``p[class~="special"]``            | 匹配带有一个名为`attr`的属性的元素，其值正为`value`，或者匹配带有一个`attr`属性的元素，其值有一个或者更多，至少有一个和`value`匹配。注意，在一列中的好几个值，是用空格隔开的。 |
| `div[lang\|="zh"]`                 | 匹配带有一个名为`attr`的属性的元素，其值可正为`value`，或者开始为`value`，后面紧随着一个连字符`-`。 |
| **子字符串匹配选择器**             |                                                              |
| `li[class^="box-"]`                | 匹配带有一个名为`attr`的属性的元素，其值开头为`value`子字符串。 |
| `li[class$="-box"]`  | 匹配带有一个名为`attr`的属性的元素，其值结尾为`value`子字符串 |
| `li[class*="box"]` | 匹配带有一个名为`attr`的属性的元素，其值的字符串中的任何地方，至少出现了一次`value`子字符串。 |
| `li[class^="box-" i]` | 匹配带有一个名为`attr`的属性的元素，其值开头为`value`子字符串。<br>（忽略大小写） |
| **伪类和伪元素** |  |
| `a:visited` | 所有访问过的`a`元素 |
| `article p:first-child` | `article`元素内部的，第一个`p`元素 |
| `article p::first-line` | `article`元素内部的，所有`p`元素的第一行 |
| **关系选择器** |  |
| `div p.special`                    | 所有`div`元素内部的`special`类`p`元素                        |
| `div > p` | 所有`div`元素内部的直接子`p`元素 |
| `h1 + p`                           | 直接跟随在`h1`元素后面的`p`元素（兄弟元素）                |
| `h1 ~ p`              | 所有跟随在`h1`元素后面的`p`元素（兄弟元素） |

## 引入

### 外部样式表

外部样式表在一个单独的扩展名为 .css 的文件中包含 CSS。这是将 CSS 应用到文档中最常见和最有用的方法。你可以将一个 CSS 文件链接到多个网页上，用同一个 CSS 样式表为所有网页确定样式。

使用 HTML `<link>` 元素来链接外部样式表文件：

```html
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>我的 CSS 测试</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <h1>Hello World!</h1>
    <p>这是我的第一个 CSS 示例</p>
  </body>
</html>
```

CSS 样式表文件可能如下所示：

```css
h1 {
  color: blue;
  background-color: yellow;
  border: 1px solid black;
}

p {
  color: red;
}
```

`<link>` 元素的 `href` 属性需要引用你文件系统中的一个文件。在上面的例子中，CSS 文件与 HTML 文档在同一个文件夹中，但你可以把它放在其他地方，并调整路径。这里有三个示例

```javascript
<!-- 在当前目录中，引用子文件夹 styles 中的样式表文件 -->
<link rel="stylesheet" href="styles/style.css" />

<!-- 在当前目录中，引用子文件夹 styles 中的子文件夹 general 中的样式表文件 -->
<link rel="stylesheet" href="styles/general/style.css" />

<!-- 在当前目录的父级目录中，引用子文件夹 styles 中的样式表文件 -->
<link rel="stylesheet" href="../styles/style.css" />
```

### 内部样式表

一个内部样式表驻留在 HTML 文档内部。要创建一个内部样式表，你要把 CSS 放置在包含在 HTML `<head>` 元素中的 `<style>` 元素内。

一个内部样式表的 HTML 代码可能看起来像这样：

```html
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>我的 CSS 测试</title>
    <style>
      h1 {
        color: blue;
        background-color: yellow;
        border: 1px solid black;
      }
      p {
        color: red;
      }
    </style>
  </head>
  <body>
    <h1>Hello World!</h1>
    <p>这是我的第一个 CSS 示例</p>
  </body>
</html>
```

在某些情况下，内部样式表可能是有用的。例如，也许你正在使用一个内容管理系统，其外部 CSS 文件是不可以直接修改的。

但对于有多个页面的网站来说，内部样式表就变成了一种不太有效的工作方式。要使用内部样式表在多个页面上应用统一的 CSS 样式，你必须在每个要使用该样式的网页上都有一个内部样式表。这种效率的下降也会影响到网站的维护。在内部样式表中使用 CSS，存在这样的风险：即使是一个简单的样式变化，也可能需要对多个网页进行编辑。

### 内联样式

内联样式是影响单个 HTML 元素的 CSS 声明，包含在元素的 `style` 属性中。在一个 HTML 文档中，内联样式的实现可能看起来像这样：

```html
<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>我的 CSS 测试</title>
  </head>
  <body>
    <h1 style="color: blue;background-color: yellow;border: 1px solid black;">
      Hello World!
    </h1>
    <p style="color:red;">这是我的第一个 CSS 示例</p>
  </body>
</html>

```

**尽可能避免以这种方式使用 CSS**。这不符合最佳实践。首先，这是对 CSS 的维护效率最低的实现。一个样式的改变可能需要在一个网页中进行多次编辑。其次，内联 CSS 还将（CSS）表现性代码与 HTML 内容混合在一起，使一切都更难阅读和理解。将代码和内容分开，可以使所有从事网站工作的人更容易维护。

有几种情况下，内联样式是比较常见的。如果你的工作环境有很大的限制，你可能不得不使用内联样式。例如，也许你的内容管理系统（CMS）只允许你编辑 HTML 主体。你也可能在 HTML 电子邮件中看到大量的内联样式，以实现与尽可能多的电子邮件客户端的兼容。

## 层叠层

应用于元素的每个 CSS 属性，只能有一个值。你可以通过在浏览器的开发者工具中检查元素来查看应用于元素的所有属性值。工具的“样式”面板显示了应用在被检查元素上的所有属性值，以及匹配的选择器和 CSS 源文件。具有优先权的来源（origin）的选择器将其值应用于匹配的元素。

除了应用的样式外，“样式”面板还显示了与选定元素匹配但由于层叠、优先级或源顺序而未应用的被划掉的值。划掉的样式可能来自具有相同优先权（precedence）来源但具有较低优先级（specificity），或者来源和优先级相同，但在代码库中较早出现。对于任何应用的属性值，可能有来自许多不同来源的几个声明被划掉。如果你看到一个划掉的样式，它有一个具有更高优先级的选择器，这意味着该值的来源或重要性较低。

通常情况下，随着网站复杂度的增加，样式表数量也会增加，这使得样式表的源顺序变得更加重要和复杂。层叠层简化了在这样的代码库维护样式表的复杂程度。层叠层是显式优先级容器，提供了对最终应用的 CSS 声明更简单和更强大的控制能力，使 web 开发者能够在不必与优先级抗争的情况下，优先考虑 CSS 的部分。

CSS （Cascading Style Sheets）中的 C 代表“层叠”。这是样式层叠在一起的方法。用户代理经过几个非常明确定义的步骤来确定每个元素的每个属性的值。我们将在这里简要列出这些步骤，然后深入研究第 4 步——层叠层，就是你来到这里学习的内容：

- **相关声明**：找到所有具有匹配每个元素的选择器的声明代码块。
- **重要性**：根据规则是普通还是重要对规则进行排序。重要的样式是指设置了 !important (en-US) 标志的样式。
- **来源**：在两个按重要性划分的分组内，按作者、用户或用户代理这几个来源对规则进行排序。
- **层**：在六个按重要性和来源划分的分组内，按层叠层进行排序。普通声明的层顺序是从创建的第一个到最后一个，然后是未分层的普通样式。对于重要的样式，这个顺序是反转的，但保持未分层的重要样式优先权最低。
- **优先级**：对于来源层中优先权相同的竞争样式，按优先级对声明进行排序。
- **出现顺序**：当两个来源层的优先权相同的选择器具有相同的优先级时，最后声明的具有最高优先级的选择器的属性值获胜。

**对于每一步，只有“仍在运行”的声明才会进入下一轮“竞争”。如果只有一个声明在运行，那么它就“赢了”，后续的步骤就没有意义了。**

### 来源和层叠优先级

有三种层叠来源类型：**用户代理样式表**、**用户样式表**和**作者样式表**。浏览器根据来源和重要性将每个声明分为六个来源分组。有八个优先权级别：六个来源分组、正在过渡的属性和正在动画的属性。优先权的顺序是从具有最低优先权的普通用户代理样式，到当前应用的动画中的样式，到具有最高优先权的重要用户代理样式，再到正在过渡的样式：

- 用户代理普通样式
- 用户普通样式
- 作者普通样式
- 正在动画的样式
- 作者重要样式
- 用户重要样式
- 用户代理重要样式
- 正在过渡的样式

**“用户代理”指的是浏览器。“用户”指的是是网站访问者。“作者”指的是你，开发者**。用 `<style>` 元素直接在元素上声明的样式是作者样式。不包括动画和过渡样式，用户代理普通样式具有最低优先权；用户代理重要样式具有最高优先权。

来源优先权总是胜过选择器优先级。如果一个元素属性被多个来源中的普通样式声明所设置，那么作者样式表将总是覆盖用户或用户代理样式表中声明的冗余普通属性。如果样式是重要的，那么用户代理样式表将总是胜过作者和用户样式。层叠来源优先权确保了不同来源之间的优先级冲突永远不会发生。

### 优先级

你会发现在一些情况下，有些规则在最后出现，但是却应用了前面的具有冲突的规则。这是因为前面的有更高的优先级——它范围更小，因此浏览器就把它选择为元素的样式。

浏览器是根据优先级来决定当多个规则有不同选择器对应相同的元素的时候需要使用哪个规则。它基本上是一个衡量选择器具体选择哪些区域的尺度：

- 一个元素选择器不是很具体，则会选择页面上该类型的所有元素，所以它的优先级就会低一些。
- 一个类选择器稍微具体点，则会选择该页面中有特定 `class` 属性值的元素，所以它的优先级就要高一点。

下面我们再来介绍两个适用于 `<h1>` 的规则。下面的 `<h1 class="main-heading">` 最后会显示红色——类选择器 `main-heading` 有更高的优先级，因此就会被应用——即使元素选择器顺序在它后面。

```css
.main-heading {
  color: red;
}
h1 {
  color: blue;
}
```

一个选择器的优先级可以说是由三个不同的值（或分量）相加，可以认为是百（ID）十（类）个（元素）——三位数的三个位数：

- ID：选择器中包含 ID 选择器则百位得一分。
- 类：选择器中包含类选择器、属性选择器或者伪类则十位得一分。
- 元素：选择器中包含元素、伪元素选择器则个位得一分。

#### 内联样式

style 属性内的样式声明，优先于所有普通的样式，无论其优先级如何。这样的声明没有选择器，但它们的优先级可以理解为 1-0-0-0；即无论选择器中有多少个 ID，它总是比其他任何优先级的权重都要高。

#### !important

有一个特殊的 CSS 可以用来覆盖所有上面所有优先级计算，不过需要很小心的使用——`!important`。用于修改特定属性的值，能够覆盖普通规则的层叠。

 了解 `!important` 是为了在阅读别人代码的时候知道有什么作用。但是，强烈建议除了非常情况不要使用它。`!important` 改变了层叠的常规工作方式，它会使调试 CSS 问题非常困难，特别是在大型样式表中。



### 继承

继承也需要在上下文中去理解，一些设置在父元素上的 CSS 属性是可以被子元素继承的，有些则不能。

举一个例子，如果你设置一个元素的 `color` 和 `font-family`，每个在里面的元素也都会有相同的属性，除非你直接在元素上设置属性。

一些属性是不能继承的——举个例子如果你在一个元素上设置 `width` 为 50% ，所有的后代不会是父元素的宽度的 50% 。如果这个也可以继承的话，CSS 就会很难使用了！

在 MDN CSS 属性参考页面，你会发现一个名为“形式定义”的技术信息框，其中列举了属性的很多数据信息，包括能否被继承。




## Footage
